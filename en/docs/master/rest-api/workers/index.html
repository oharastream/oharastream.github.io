<!DOCTYPE html><html lang="en-us" >

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Vito Jeng">

  
  
  
    
  
  <meta name="description" content="Worker is core of running connectors for Ohara. It provides a simple but powerful system to distribute and execute connectors on different nodes. The performance of connectors depends on the scale of worker cluster.">

  
  <link rel="alternate" hreflang="en-us" href="https://oharastream.github.io/en/docs/master/rest-api/workers/">

  


  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.css" integrity="sha256-SHMGCYmST46SoyGgo4YR/9AlK1vf3ff84Aq9yK4hdqM=" crossorigin="anonymous">
    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      
        
      

      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/en/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_huf5f81cd12511c4e8b7f06b033f435f0f_18329_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_huf5f81cd12511c4e8b7f06b033f435f0f_18329_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://oharastream.github.io/en/docs/master/rest-api/workers/">

  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="OharaStream">
  <meta property="og:url" content="https://oharastream.github.io/en/docs/master/rest-api/workers/">
  <meta property="og:title" content="Worker | OharaStream">
  <meta property="og:description" content="Worker is core of running connectors for Ohara. It provides a simple but powerful system to distribute and execute connectors on different nodes. The performance of connectors depends on the scale of worker cluster."><meta property="og:image" content="https://oharastream.github.io/images/icon_huf5f81cd12511c4e8b7f06b033f435f0f_18329_512x512_fill_lanczos_center_2.png">
  <meta property="twitter:image" content="https://oharastream.github.io/images/icon_huf5f81cd12511c4e8b7f06b033f435f0f_18329_512x512_fill_lanczos_center_2.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-06-18T00:00:00&#43;01:00">
    
    <meta property="article:modified_time" content="2020-08-19T17:28:11&#43;08:00">
  

  



  


  


  





  <title>Worker | OharaStream</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/en/">OharaStream</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/en/">OharaStream</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/en/docs"><span>Docs</span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      
      <li class="nav-item">
        <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
      </li>
      

      
      <li class="nav-item dropdown theme-dropdown">
        <a href="#" class="nav-link js-theme-selector" data-toggle="dropdown" aria-haspopup="true">
          <i class="fas fa-palette" aria-hidden="true"></i>
        </a>
        <div class="dropdown-menu">
          <a href="#" class="dropdown-item js-set-theme-light">
            <span>Light</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-dark">
            <span>Dark</span>
          </a>
          <a href="#" class="dropdown-item js-set-theme-auto">
            <span>Automatic</span>
          </a>
        </div>
      </li>
      

      

    </ul>

  </div>
</nav>


  

<div class="container-fluid docs">
  <div class="row flex-xl-nowrap">
    <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
      





  
    
  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
  <input name="q" type="search" class="form-control" placeholder="Search..." autocomplete="off">
  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="#">Quickstart</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/en/docs/master/">Overview</a>
      </li>
      
      <li >
        <a href="/en/docs/master/quickstart/quickstartvm/">Using Quickstart VM</a>
      </li>
      
    </ul>
    

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="#">Contents</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/en/docs/master/user_guide/">User Guide</a>
      </li>
      
      <li >
        <a href="/en/docs/master/custom_connector/">Custom Connector</a>
      </li>
      
      <li >
        <a href="/en/docs/master/custom_stream/">Custom Stream</a>
      </li>
      
      <li >
        <a href="/en/docs/master/manager_dev_guide/">Ohara Manager Development Guideline</a>
      </li>
      
      <li >
        <a href="/en/docs/master/setting_definition/">Setting Definition Guide</a>
      </li>
      
      <li >
        <a href="/en/docs/master/shabondi/">Shabondi</a>
      </li>
      
      <li >
        <a href="/en/docs/master/integration_test/">Integration Test</a>
      </li>
      
      <li >
        <a href="/en/docs/master/build/build-quickstart-vm/">Build Quickstart VM</a>
      </li>
      
      <li >
        <a href="/en/docs/master/build/build-ohara/">How to build Ohara</a>
      </li>
      
      <li >
        <a href="/en/docs/master/docker/">Docker and Docker-compose</a>
      </li>
      
      <li >
        <a href="/en/docs/master/contributing/">Contributing</a>
      </li>
      
    </ul>
    

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/en/docs/master/rest-api/">REST APIs</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/en/docs/master/rest-api/">API Overview</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/brokers/">Broker API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/connectors/">Connector API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/containers/">Container API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/files/">Files API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/inspect/">Inspect API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/logs/">Logs API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/nodes/">Node API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/objects/">Object API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/pipelines/">Pipeline API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/shabondis/">Shabondi API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/streams/">Stream API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/topics/">Topic API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/validate/">Validation API</a>
      </li>
      
      <li class="active">
        <a href="/en/docs/master/rest-api/workers/">Worker API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/volumes/">Volume API</a>
      </li>
      
      <li >
        <a href="/en/docs/master/rest-api/zookeepers/">Zookeeper API</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

    </div>

    
    <div class="d-none d-xl-block col-xl-2 docs-toc">
      <ul class="nav toc-top">
        <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
      </ul>

      <nav id="TableOfContents">
  <ul>
    <li><a href="#rest-workers-create">create a worker properties</a></li>
    <li><a href="#rest-workers-list">list all workers clusters</a></li>
    <li><a href="#update-broker-cluster-properties">update broker cluster properties</a></li>
    <li><a href="#delete-a-worker-properties">delete a worker properties</a></li>
    <li><a href="#rest-workers-get">get a worker cluster</a></li>
    <li><a href="#start-a-worker-cluster">start a worker cluster</a></li>
    <li><a href="#stop-a-worker-cluster">stop a worker cluster</a></li>
    <li><a href="#add-a-new-node-to-a-running-worker-cluster">add a new node to a running worker cluster</a></li>
    <li><a href="#remove-a-node-from-a-running-worker-cluster">remove a node from a running worker cluster</a></li>
  </ul>
</nav>

      
    </div>
    

    <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

      <article class="article">

        <div class="docs-article-container">
          <h1>Worker</h1>

          <div class="article-style">
            <p>
<a href="https://kafka.apache.org/intro" target="_blank" rel="noopener">Worker</a> is core of running connectors
for Ohara. It provides a simple but powerful system to distribute and
execute connectors on different nodes. The performance of connectors
depends on the scale of worker cluster. For example, you can assign the
number of task when creating connector. If there is only 3 nodes within
your worker cluster and you specify 6 tasks for your connector, the
tasks of you connectors still be deployed on 3 nodes. That is to say,
the connector can&rsquo;t get more resources to execute.</p>
<p>Worker is based on 
<a href="/en/docs/master/rest-api/brokers/">Broker</a>,
hence you have to create broker cluster first. Noted that a
broker cluster can be used by multi worker clusters. BTW, worker cluster
will pre-allocate a lot of topics on broker cluster, and the pre-created
topics CAN&rsquo;T be reused by different worker clusters.</p>
<p>The properties which can be set by user are shown below.</p>
<ol>
<li>name (<strong>string</strong>) &mdash; cluster name. The legal character is number,
lowercase alphanumeric characters, or &lsquo;.&rsquo;</li>
<li>group (<strong>string</strong>) &mdash; cluster group. The legal character is number,
lowercase alphanumeric characters, or &lsquo;.&rsquo;</li>
<li>imageName (<strong>string</strong>) &mdash; docker image</li>
<li>brokerClusterKey (<strong>Object</strong>) &mdash; the broker cluster used to store
data generated by this worker cluster
<ul>
<li>brokerClusterKey.group (<strong>option(string)</strong>) &mdash; the group of
cluster</li>
<li>brokerClusterKey.name (<strong>string</strong>) &mdash; the name of cluster</li>
</ul>
</li>
</ol>
<div class="alert alert-note">
  <div>
    the following forms are legal as well: (1) <code>{&quot;name&quot;: &quot;n&quot;}</code>, (2) <code>&quot;n&quot;</code>.
Both forms are converted to <code>{&quot;group&quot;: &quot;default&quot;, &quot;name&quot;: &quot;n&quot;}</code>
  </div>
</div>
<ol start="5">
<li>
<p>clientPort (<strong>int</strong>) &mdash; worker client port</p>
</li>
<li>
<p>jmxPort (<strong>int</strong>) &mdash; worker jmx port</p>
</li>
<li>
<p>freePorts (<strong>Array(int)</strong>) &mdash; the ports you want to pre-bind for the connectors.</p>
<p>If your connectors want to build a service on a port which is available
to external nodes, you have to define the free ports for your worker cluster
so as to make Configurator pre-bind the ports on your worker
cluster. Otherwise, your connectors is disable to build service
on the port of worker cluster and be connected by external node.</p>
</li>
<li>
<p>group.id (<strong>string</strong>) &mdash; the id of worker stored in broker cluster</p>
</li>
<li>
<p>config.storage.topic (<strong>string</strong>) &mdash; a internal topic used to store
connector configuration</p>
</li>
<li>
<p>config.storage.replication.factor (<strong>int</strong>) &mdash; number of
replications for config topic</p>
</li>
<li>
<p>offset.storage.topic (<strong>string</strong>) &mdash; a internal topic used to store
connector offset</p>
</li>
<li>
<p>offset.storage.partitions (<strong>int</strong>) &mdash; number of partitions for
offset topic</p>
</li>
<li>
<p>offset.storage.replication.factor (<strong>int</strong>) &mdash; number of
replications for offset topic</p>
</li>
<li>
<p>status.storage.topic (<strong>string</strong>) &mdash; an internal topic used to store
connector status</p>
</li>
<li>
<p>status.storage.partitions (<strong>int</strong>) &mdash; number of partitions for
status topic</p>
</li>
<li>
<p>status.storage.replication.factor (<strong>int</strong>) &mdash; number of
replications for status topic</p>
</li>
<li>
<p>pluginKeys (<strong>array(object)</strong>) &mdash; the &ldquo;primary key&rdquo; of jars which contain your connectors</p>
<p>You can require worker cluster to load the jars stored in ohara
if you want to run custom connectors on the worker cluster. see

<a href="/en/docs/master/rest-api/files/">Files APIs</a> for
uploading jars to ohara. The files which are deployed to worker
must be uber jars - it must include all dependencies exclude for
ohara stuff.</p>
</li>
<li>
<p>sharedJarKeys (<strong>array(object)</strong>) &mdash; those jars is deployed on the root classpath so
all connectors are able to load them.</p>
</li>
</ol>
<div class="alert alert-hint">
  <div>
    <ol>
<li>
<p>When you implement the Ohara connector, you must use the
File API upload connector jar file to worker.</p>
</li>
<li>
<p>If your jdbc source connector need to use the third party
jar file (such oracle jdbc jar file), you must use the File
API upload jar file then setting sharedJarKeys to create the
worker API.</p>
</li>
</ol>
  </div>
</div>
<ol start="19">
<li>
<p>nodeNames (<strong>array(string)</strong>) &mdash; the nodes running the worker
process</p>
<p>The following information are updated by Ohara.</p>
</li>
<li>
<p>aliveNodes (<strong>array(string)</strong>) &mdash; the nodes that host the running
containers of worker</p>
</li>
</ol>
<div class="alert alert-hint">
  <div>
    The group.id, config.storage.topic, offset.storage.topic and
status.storage.topic must be unique in broker cluster. Don&rsquo;t reuse
them in same broker cluster. Dispatching above unique resources to
two worker cluster will pollute the data. Of course, Ohara do a
quick failure for this dumb case. However, it is not a quick
failure when you are using raw kafka rather than Ohara. Please
double check what you configure!
  </div>
</div>
<h2 id="rest-workers-create">create a worker properties</h2>
<p><em>POST /v0/workers</em></p>
<ul>
<li>
<p>Example Request</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;wk&quot;,
  &quot;nodeNames&quot;: [&quot;node00&quot;],
  &quot;brokerClusterKey&quot;: &quot;bk&quot;
}
</code></pre>
</li>
<li>
<p>Example Response</p>
<pre><code class="language-json">{
  &quot;brokerClusterKey&quot;: {
    &quot;group&quot;: &quot;default&quot;,
    &quot;name&quot;: &quot;bk00&quot;
  },
  &quot;name&quot;: &quot;wk00&quot;,
  &quot;offset.storage.partitions&quot;: 1,
  &quot;xms&quot;: 2048,
  &quot;routes&quot;: {},
  &quot;config.storage.topic&quot;: &quot;b8dadc3de21048fa927335b8f&quot;,
  &quot;sharedJarKeys&quot;: [],
  &quot;lastModified&quot;: 1578982566359,
  &quot;tags&quot;: {},
  &quot;xmx&quot;: 2048,
  &quot;imageName&quot;: &quot;oharastream/connect-worker:0.11.0-SNAPSHOT&quot;,
  &quot;offset.storage.topic&quot;: &quot;346b839ea3e74387ab1eea409&quot;,
  &quot;status.storage.replication.factor&quot;: 1,
  &quot;group.id&quot;: &quot;af4b4d49234a4848bb90fb452&quot;,
  &quot;offset.storage.replication.factor&quot;: 1,
  &quot;aliveNodes&quot;: [],
  &quot;pluginKeys&quot;: [],
  &quot;status.storage.partitions&quot;: 1,
  &quot;freePorts&quot;: [],
  &quot;jmxPort&quot;: 33333,
  &quot;config.storage.partitions&quot;: 1,
  &quot;clientPort&quot;: 45127,
  &quot;config.storage.replication.factor&quot;: 1,
  &quot;group&quot;: &quot;default&quot;,
  &quot;nodeNames&quot;: [
    &quot;node00&quot;
  ],
  &quot;status.storage.topic&quot;: &quot;1cdca943f0b945bc892ebe9a7&quot;
}
</code></pre>
</li>
</ul>
<h2 id="rest-workers-list">list all workers clusters</h2>
<p><em>GET /v0/workers</em></p>
<ul>
<li>Example Response
<pre><code class="language-json">[
  {
    &quot;brokerClusterKey&quot;: {
      &quot;group&quot;: &quot;default&quot;,
      &quot;name&quot;: &quot;bk00&quot;
    },
    &quot;name&quot;: &quot;wk00&quot;,
    &quot;offset.storage.partitions&quot;: 1,
    &quot;xms&quot;: 2048,
    &quot;routes&quot;: {},
    &quot;config.storage.topic&quot;: &quot;b8dadc3de21048fa927335b8f&quot;,
    &quot;sharedJarKeys&quot;: [],
    &quot;lastModified&quot;: 1578982566359,
    &quot;tags&quot;: {},
    &quot;xmx&quot;: 2048,
    &quot;imageName&quot;: &quot;oharastream/connect-worker:0.11.0-SNAPSHOT&quot;,
    &quot;offset.storage.topic&quot;: &quot;346b839ea3e74387ab1eea409&quot;,
    &quot;status.storage.replication.factor&quot;: 1,
    &quot;group.id&quot;: &quot;af4b4d49234a4848bb90fb452&quot;,
    &quot;offset.storage.replication.factor&quot;: 1,
    &quot;aliveNodes&quot;: [],
    &quot;pluginKeys&quot;: [],
    &quot;status.storage.partitions&quot;: 1,
    &quot;freePorts&quot;: [],
    &quot;jmxPort&quot;: 33333,
    &quot;config.storage.partitions&quot;: 1,
    &quot;clientPort&quot;: 45127,
    &quot;config.storage.replication.factor&quot;: 1,
    &quot;group&quot;: &quot;default&quot;,
    &quot;nodeNames&quot;: [
      &quot;node00&quot;
    ],
    &quot;status.storage.topic&quot;: &quot;1cdca943f0b945bc892ebe9a7&quot;
  }
]
</code></pre>
</li>
</ul>
<h2 id="update-broker-cluster-properties">update broker cluster properties</h2>
<p><em>PUT /v0/workers/$name?group=$group</em></p>
<div class="alert alert-hint">
  <div>
    If the required worker (group, name) was not exists, we will try to use
this request as POST
  </div>
</div>
<ul>
<li>
<p>Example Request</p>
<pre><code class="language-json">{
  &quot;jmxPort&quot;: 7777
}
</code></pre>
</li>
<li>
<p>Example Response</p>
<pre><code class="language-json">{
  &quot;brokerClusterKey&quot;: {
    &quot;group&quot;: &quot;default&quot;,
    &quot;name&quot;: &quot;bk00&quot;
  },
  &quot;name&quot;: &quot;wk00&quot;,
  &quot;offset.storage.partitions&quot;: 1,
  &quot;xms&quot;: 2048,
  &quot;routes&quot;: {},
  &quot;config.storage.topic&quot;: &quot;b8dadc3de21048fa927335b8f&quot;,
  &quot;sharedJarKeys&quot;: [],
  &quot;lastModified&quot;: 1578982765738,
  &quot;tags&quot;: {},
  &quot;xmx&quot;: 2048,
  &quot;imageName&quot;: &quot;oharastream/connect-worker:0.11.0-SNAPSHOT&quot;,
  &quot;offset.storage.topic&quot;: &quot;346b839ea3e74387ab1eea409&quot;,
  &quot;status.storage.replication.factor&quot;: 1,
  &quot;group.id&quot;: &quot;af4b4d49234a4848bb90fb452&quot;,
  &quot;offset.storage.replication.factor&quot;: 1,
  &quot;aliveNodes&quot;: [],
  &quot;pluginKeys&quot;: [],
  &quot;status.storage.partitions&quot;: 1,
  &quot;freePorts&quot;: [],
  &quot;jmxPort&quot;: 7777,
  &quot;config.storage.partitions&quot;: 1,
  &quot;clientPort&quot;: 45127,
  &quot;config.storage.replication.factor&quot;: 1,
  &quot;group&quot;: &quot;default&quot;,
  &quot;nodeNames&quot;: [
    &quot;node00&quot;
  ],
  &quot;status.storage.topic&quot;: &quot;1cdca943f0b945bc892ebe9a7&quot;
}
</code></pre>
</li>
</ul>
<h2 id="delete-a-worker-properties">delete a worker properties</h2>
<p><em>DELETE /v0/workers/$name?group=$group</em></p>
<p>You cannot delete properties of an non-stopped worker cluster. We will
use the default value as the query parameter &ldquo;?group=&rdquo; if you don&rsquo;t
specify it.</p>
<ul>
<li>Example Response
<pre><code>204 NoContent
</code></pre>
</li>
</ul>
<div class="alert alert-hint">
  <div>
    It is ok to delete an nonexistent worker cluster, and the response
is 204 NoContent.
  </div>
</div>
<h2 id="rest-workers-get">get a worker cluster</h2>
<p><em>GET /v0/workers/$name?group=$group</em></p>
<p>We will use the default value as the query parameter &ldquo;?group=&rdquo; if you
don&rsquo;t specify it.</p>
<ul>
<li>Example Response
<pre><code class="language-json">{
  &quot;brokerClusterKey&quot;: {
    &quot;group&quot;: &quot;default&quot;,
    &quot;name&quot;: &quot;bk00&quot;
  },
  &quot;name&quot;: &quot;wk00&quot;,
  &quot;offset.storage.partitions&quot;: 1,
  &quot;xms&quot;: 2048,
  &quot;routes&quot;: {},
  &quot;config.storage.topic&quot;: &quot;b8dadc3de21048fa927335b8f&quot;,
  &quot;sharedJarKeys&quot;: [],
  &quot;lastModified&quot;: 1578982765738,
  &quot;tags&quot;: {},
  &quot;xmx&quot;: 2048,
  &quot;imageName&quot;: &quot;oharastream/connect-worker:0.11.0-SNAPSHOT&quot;,
  &quot;offset.storage.topic&quot;: &quot;346b839ea3e74387ab1eea409&quot;,
  &quot;status.storage.replication.factor&quot;: 1,
  &quot;group.id&quot;: &quot;af4b4d49234a4848bb90fb452&quot;,
  &quot;offset.storage.replication.factor&quot;: 1,
  &quot;aliveNodes&quot;: [],
  &quot;pluginKeys&quot;: [],
  &quot;status.storage.partitions&quot;: 1,
  &quot;freePorts&quot;: [],
  &quot;jmxPort&quot;: 7777,
  &quot;config.storage.partitions&quot;: 1,
  &quot;clientPort&quot;: 45127,
  &quot;config.storage.replication.factor&quot;: 1,
  &quot;group&quot;: &quot;default&quot;,
  &quot;nodeNames&quot;: [
    &quot;node00&quot;
  ],
  &quot;status.storage.topic&quot;: &quot;1cdca943f0b945bc892ebe9a7&quot;
}
</code></pre>
</li>
</ul>
<h2 id="start-a-worker-cluster">start a worker cluster</h2>
<p><em>PUT /v0/workers/$name/start?group=$group</em></p>
<p>We will use the default value as the query parameter &ldquo;?group=&rdquo; if you
don&rsquo;t specify it.</p>
<ul>
<li>Example Response
<pre><code>202 Accepted
</code></pre>
</li>
</ul>
<div class="alert alert-hint">
  <div>
    You should use <a href="#rest-workers-get">Get worker cluster</a> to fetch up-to-date status
  </div>
</div>
<h2 id="stop-a-worker-cluster">stop a worker cluster</h2>
<p>Gracefully stopping a running worker cluster.</p>
<p><em>PUT /v0/workers/$name/stop?group=$group[&amp;force=true]</em></p>
<p>We will use the default value as the query parameter &ldquo;?group=&rdquo; if you
don&rsquo;t specify it.</p>
<ul>
<li>
<p>Query Parameters</p>
<ol>
<li>force (<strong>boolean</strong>) &mdash; true if you don&rsquo;t want to wait the
graceful shutdown (it can save your time but may damage your
data).</li>
</ol>
</li>
<li>
<p>Example Response</p>
<pre><code>202 Accepted
</code></pre>
</li>
</ul>
<div class="alert alert-hint">
  <div>
    You should use <a href="#rest-workers-get">Get worker cluster</a> to fetch up-to-date status
  </div>
</div>
<h2 id="add-a-new-node-to-a-running-worker-cluster">add a new node to a running worker cluster</h2>
<p><em>PUT /v0/workers/$name/$nodeName?group=$group</em></p>
<p>We will use the default value as the query parameter &ldquo;?group=&rdquo; if you
don&rsquo;t specify it.</p>
<p>If you want to extend a running worker cluster, you can add a node to
share the heavy loading of a running worker cluster. However, the
balance is not triggered at once. By the way, moving a task to another
idle node needs to <strong>stop</strong> task first. Don&rsquo;t worry about the temporary
lower throughput when balancer is running.</p>
<h2 id="remove-a-node-from-a-running-worker-cluster">remove a node from a running worker cluster</h2>
<p><em>DELETE /v0/workers/$name/$nodeName?group=$group</em></p>
<p>We will use the default value as the query parameter &ldquo;?group=&rdquo; if you
don&rsquo;t specify it.</p>
<p>If your budget is limited, you can decrease the number of nodes running
worker cluster. BUT, removing a node from a running worker cluster
invoke a lot of task move, and it will decrease the throughput of your
connector.</p>
<ul>
<li>Example Response
<pre><code>204 NoContent
</code></pre>
</li>
</ul>
<div class="alert alert-hint">
  <div>
    It is ok to delete an nonexistent worker node, and the response is
204 NoContent.
  </div>
</div>

          </div>

          



          
        </div>

        <div class="body-footer">
          <p>Last updated on Aug 19, 2020</p>

          






  
  

<p class="edit-page">
  <a href="https://github.com/oharastream/ohara-docs/edit/master/content/en/docs/master/rest-api/workers.md">
    <i class="fas fa-pen pr-2"></i>Edit this page
  </a>
</p>




          


          


  
  



        </div>

      </article>

      <footer class="site-footer">
  

  <p class="powered-by">
    
  </p>

  
  






  <p class="powered-by">
    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
  </p>
</footer>


    </main>
  </div>
</div>


      

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.5.1/leaflet.js" integrity="sha256-EErZamuLefUnbMBQbsEqu1USa+btR2oIlCpBJbyD4/g=" crossorigin="anonymous"></script>
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    
    
    
    
    
    
    <script>
      const search_config = {"indexURI":"/en/index.json","minLength":1,"threshold":0.3};
      const i18n = {"no_results":"No results found","placeholder":"Search...","results":"results found"};
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks",
        'slides' : "Slides"
        };
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.37431be2d92d7fb0160054761ab79602.js"></script>

    






  
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
